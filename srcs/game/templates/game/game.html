{% load static %}
<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css"
        rel="stylesheet">

    <meta charset=utf-8 />
    <title>Jeu</title>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
            }
        }
    </script>
</head>
<style>
    #gameContainer {
        position: relative;

    }

    .score-animate {
        animation: scaleUp 0.5s ease, blink 1s ease, colorUp 1s ease;
    }

    .pause-overlay {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 10;
    }

    .pause-text {
        color: white;
        font-size: 3em;
        text-align: center;
        position: relative;
        top: 50%;
        transform: translateY(-50%);
    }

    .scoreboard {
        position: absolute;
        top: 10px;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        padding: 0 20px;
    }

    .player-score {
        font-size: 4em;
        color: white;
        z-index: 11;
    }

    .custom-purple {
        background-color: rgba(188, 55, 188, 0.872);
        color: white;
        border-color: rgb(94, 0, 94);
    }

    .custom-btn-size {
        padding: 20px 40px;
        font-size: 2em;
    }

    .pause-text > div {
        margin-left: 30%;
        margin-right: 30%;
    }

    #buttonContainer {
        position: absolute;
        width: 70%;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 11;
    }

    #controls div {
    cursor: pointer;
    color: rgba(188, 55, 188, 0.872);
    margin: 10px 0;
    padding: 5px 10px;
    border: 1px solid rgba(188, 55, 188, 0.872);
    border-radius: 5px;
    display: inline-block;
}

#controls div:hover {
    background-color: rgb(87, 49, 75);
}

#controls div.active {
    background-color: rgb(204, 0, 255);
    color: white;
}

    @keyframes scaleUp {
        0% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.6);
        }

        100% {
            transform: scale(1);
        }
    }

    @keyframes blink {
        0% {
            opacity: 1;
        }

        50% {
            opacity: 0.5;
        }

        100% {
            opacity: 1;
        }
    }

    @keyframes colorUp {
        0% {
            color: white;
        }

        50% {
            color: rgb(208, 0, 255)
        }

        100% {
            color: white;
        }
        
    }
</style>
<div id="app">
    <div id="game" class="route-section" style="display: none;">
        <div id="gameContainer">
            <div class="scoreboard">
                <div class="player-score score-animate" id="player1Score">0</div>
                <div class="player-score score-animate" id="player2Score">0</div>
            </div>
            <div id="buttonContainer" class="text-center">
                <div class="row justify-content-center">
                    <div class="col-auto">
                        <button class="btn custom-btn-size custom-purple mb-2" id="homeButton" style="display: none;">
                            <i class="bi bi-house-door-fill"></i>
                        </button>
                    </div>
                    <div class="col-auto">
                        <button class="btn custom-btn-size custom-purple mb-2" id="startButton">
                            <i class="bi bi-play-fill"></i>
                        </button>
                        <button class="btn custom-btn-size custom-purple mb-2" id="pauseButton" style="display: none;">
                            <i class="bi bi-pause-fill"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="pauseOverlay" class="pause-overlay">
        <div class="pause-text">
            <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="toggle3D" checked>
                <label class="form-check-label" for="toggle3D">3D</label>
            </div>
            
            <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="toggleColorChange" checked>
                <label class="form-check-label" for="toggleColorChange">Ball Color Change</label>
            </div>

            <div id="controls">
                <div id="upControl">Up: <span>w</span></div>
                <div id="downControl">Down: <span>s</span></div>
            </div>
        </div>
    </div>
    

</div>
<div id="home" class="route-section">
    <h1>THE TRANSCENDANCE PONG HOMEPAGE TU CONNAIS LES BAILS</h1>
</div>
</div>
</body>

</html>

<script>
    let width = {{ width }};
    let height = {{ height }};
    let paddleh = {{ paddleh }};
    let paddlew = {{ paddlew }};
    let paddled = {{ paddled }};
    let paddlespeed = {{ paddlespeed }};
    let recoil = {{ recoil }};
    let paddlefriction = {{ paddlefriction }};
    let ballfriction = {{ ballfriction }};
    let smash = {{ smash }};
    let recovertime = {{ recovertime }}
    let ballv = {{ ballv }};
    let lengoal = {{ lengoal }}
</script>

<script src="{% static 'routes.js' %}"></script>
<script type="module" src="{% static 'script.js' %}"></script>